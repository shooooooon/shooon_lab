# SHooon Lab - Project TODO

## 基本機能
- [x] データベーススキーマ設計
  - [x] 記事テーブル（articles）
  - [x] タグテーブル（tags）
  - [x] シリーズテーブル（series）
  - [x] コメントテーブル（comments）
  - [x] 記事タグ関連テーブル（article_tags）

- [x] バックエンドAPI実装
  - [x] 記事CRUD API
  - [x] タグCRUD API
  - [x] シリーズCRUD API
  - [x] コメントCRUD API
  - [x] アーカイブAPI（年別集計）
  - [x] 特集記事API（重み付け対応）
  - [x] 検索API（全文検索）

- [x] フロントエンド基盤
  - [x] レイアウトコンポーネント
  - [x] ナビゲーションヘッダー
  - [x] フッター
  - [x] テーマ設定（配色）

- [x] ホームページ
  - [x] 特集記事スライダー
  - [x] 最新記事一覧

- [x] 記事詳細ページ
  - [x] Markdown本文表示
  - [x] 脚注表示
  - [x] ギャラリー表示
  - [x] シリーズナビゲーション
  - [x] 共有機能

- [x] コメントシステム
  - [x] スレッドコメント表示
  - [x] コメント投稿フォーム
  - [x] 返信機能

- [x] アーカイブブラウザ
  - [x] 年別フィルター
  - [x] タグフィルター
  - [x] シリーズフィルター
  - [x] ページネーション

- [x] 検索ページ

- [x] 管理者機能
  - [x] 管理者ダッシュボード
  - [x] 記事一覧・管理
  - [x] 記事作成・編集エディター
  - [x] コメントモデレーション
  - [x] タグ管理
  - [x] シリーズ管理

- [x] テスト
  - [x] API権限テスト
  - [x] 認証テスト

## CODE_REVIEW第1版改善項目（完了）

### 最優先（セキュリティ）
- [x] #1: SQLインジェクション対策 - LIKEワイルドカードエスケープ
- [x] #17: 管理者権限チェック強化 - adminProcedure使用

### 高優先度
- [x] #2: ビューカウント副作用分離 - incrementViewをmutationに変更
- [x] #4: コメント返信フォームバグ修正 - 返信フォームをCommentThread内に移動
- [x] #6: N+1クエリ問題最適化 - JOINクエリ使用

### 中優先度
- [x] #3: 型安全性向上 - any型をinferRouterOutputsに置換
- [x] #5: LIKEエスケープ関数追加
- [x] #8: タグslugユニーク制約追加
- [x] #9: シリーズslugユニーク制約追加
- [x] #10: 記事slugユニーク制約追加
- [x] #11: 外部キー制約追加（articleTags）
- [x] #12: DB初期化パターン改善

### 低優先度
- [x] #7: 記事リストクエリ最適化
- [x] #13: ArticleCard共通コンポーネント化
- [x] #14: 記事リストページネーション改善
- [x] #15: 日本語スラッグ対応
- [x] #16: getArchiveYears型キャスト改善
- [x] #18: テストカバレッジ拡大

## CODE_REVIEW第2版改善項目（完了）

### 高優先度
- [x] #A: ビューカウント重複実行リスク - useRefでガード追加

### 中優先度
- [x] #B: Archive/SearchのArticleCard共通化 - ArticleCardHorizontal使用
- [x] #D: テストアサーション強化 - NOT_ADMIN_ERR_MSG定数使用

### 低優先度
- [x] #C: getArchiveYears型キャスト改善 - ArchiveYearRowインターフェース定義
